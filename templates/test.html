<!DOCTYPE HTML>
<html>
<head>
<style>
#whiteboard {
  width: 400px;
  height: 300px;
  padding: 10px;
  border: 1px solid #aaaaaa;
}
.dragbox {
  width: 50px;
  height: 50px;
  border: 2px solid #ccc;
  position: relative;
  overflow: hidden;
  resize: none;
}
.close-btn {
  position: absolute;
  top: -8px;
  right: -8px;
  cursor: pointer;
  background-color: red;
  color: white;
  padding: 3px 6px;
  font-size: 15px;
  border-radius: 50%;
  border: none;
  outline: none;
  z-index: 10;
}
</style>
</head>
<body>


<div id="whiteboard" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br>
<div class="dragbox">
  <span id = "close-btn" class="close-btn" onclick="this.parentElement.remove()" hidden>Ã—</span>
  <img draggable="true" ondragstart="drag(event)" width="100%" height="100%" 
    id="palette-img" src="https://pbs.twimg.com/profile_images/1341868702606774272/UY8t3Nl9_400x400.jpg">
</div>



</body>
<script>
  function allowDrop(ev) {
    ev.preventDefault();
  }
  
  draggedItem = null;
  whiteboard = document.getElementById("whiteboard");
  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    draggedItem = ev.target.parentElement;
  }
  
  function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");
    // const clone = document.getElementById(data);
    var palette = draggedItem;
    if (!draggedItem.hasAttribute("copied")){
      palette = draggedItem.cloneNode(true);
    }
    console.log(palette.className)
    if (palette.className!="dragbox"){
      return;
    }
    palette.style.position = 'absolute';
    whiteboard.appendChild(palette);
    //palette.size wont update until append  
    palette.style.left = `${ev.clientX-palette.clientWidth/2}px`;
    palette.style.top = `${ev.clientY-palette.clientHeight/2}px`;
    palette.setAttribute("copied",'');
    palette.childNodes[1].removeAttribute('hidden')
    palette.style.resize = 'both'
  }
  </script>
</html>

